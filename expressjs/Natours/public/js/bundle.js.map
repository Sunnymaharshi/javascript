{"mappings":"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","sources":["public/js/index.js","public/js/mapbox.js","public/js/login.js","public/js/alerts.js","public/js/updateSettings.js"],"sourcesContent":["/* eslint-disable */\r\nimport '@babel/polyfill';\r\nimport { displayMap } from './mapbox';\r\nimport { login, logout } from './login';\r\nimport { updateSettings } from './updateSettings';\r\n\r\n// DOM ELEMENTS\r\nconst mapBox = document.getElementById('map');\r\nconst loginForm = document.querySelector('.form--login');\r\nconst logOutBtn = document.querySelector('.nav__el--logout');\r\nconst userDataForm = document.querySelector('.form-user-data');\r\nconst userPasswordForm = document.querySelector('.form-user-password');\r\n\r\n// DELEGATION\r\nif (mapBox) {\r\n    const locations = JSON.parse(mapBox.dataset.locations);\r\n    displayMap(locations);\r\n}\r\n\r\nif (loginForm)\r\n    loginForm.addEventListener('submit', (e) => {\r\n        e.preventDefault();\r\n        const email = document.getElementById('email').value;\r\n        const password = document.getElementById('password').value;\r\n        login(email, password);\r\n    });\r\n\r\nif (logOutBtn) logOutBtn.addEventListener('click', logout);\r\n\r\nif (userDataForm)\r\n    userDataForm.addEventListener('submit', (e) => {\r\n        e.preventDefault();\r\n        const name = document.getElementById('name').value;\r\n        const email = document.getElementById('email').value;\r\n        updateSettings({ name, email }, 'data');\r\n    });\r\n\r\nif (userPasswordForm)\r\n    userPasswordForm.addEventListener('submit', async (e) => {\r\n        e.preventDefault();\r\n        document.querySelector('.btn--save-password').textContent =\r\n            'Updating...';\r\n\r\n        const passwordCurrent =\r\n            document.getElementById('password-current').value;\r\n        const password = document.getElementById('password').value;\r\n        const passwordConfirm =\r\n            document.getElementById('password-confirm').value;\r\n        await updateSettings(\r\n            { passwordCurrent, password, passwordConfirm },\r\n            'password',\r\n        );\r\n\r\n        document.querySelector('.btn--save-password').textContent =\r\n            'Save password';\r\n        document.getElementById('password-current').value = '';\r\n        document.getElementById('password').value = '';\r\n        document.getElementById('password-confirm').value = '';\r\n    });\r\n","/* eslint-disable */\r\nexport const displayMap = locations => {\r\n    mapboxgl.accessToken =\r\n      'pk.eyJ1Ijoiam9uYXNzY2htZWR0bWFubiIsImEiOiJjam54ZmM5N3gwNjAzM3dtZDNxYTVlMnd2In0.ytpI7V7w7cyT1Kq5rT9Z1A';\r\n  \r\n    var map = new mapboxgl.Map({\r\n      container: 'map',\r\n      style: 'mapbox://styles/jonasschmedtmann/cjvi9q8jd04mi1cpgmg7ev3dy',\r\n      scrollZoom: false\r\n      // center: [-118.113491, 34.111745],\r\n      // zoom: 10,\r\n      // interactive: false\r\n    });\r\n  \r\n    const bounds = new mapboxgl.LngLatBounds();\r\n  \r\n    locations.forEach(loc => {\r\n      // Create marker\r\n      const el = document.createElement('div');\r\n      el.className = 'marker';\r\n  \r\n      // Add marker\r\n      new mapboxgl.Marker({\r\n        element: el,\r\n        anchor: 'bottom'\r\n      })\r\n        .setLngLat(loc.coordinates)\r\n        .addTo(map);\r\n  \r\n      // Add popup\r\n      new mapboxgl.Popup({\r\n        offset: 30\r\n      })\r\n        .setLngLat(loc.coordinates)\r\n        .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\r\n        .addTo(map);\r\n  \r\n      // Extend map bounds to include current location\r\n      bounds.extend(loc.coordinates);\r\n    });\r\n  \r\n    map.fitBounds(bounds, {\r\n      padding: {\r\n        top: 200,\r\n        bottom: 150,\r\n        left: 100,\r\n        right: 100\r\n      }\r\n    });\r\n  };","/* eslint-disable */\r\nimport axios from 'axios';\r\nimport { showAlert } from './alerts';\r\n\r\nexport const login = async (email, password) => {\r\n    try {\r\n        const res = await axios({\r\n            method: 'POST',\r\n            url: 'http://127.0.0.1:3000/api/v1/users/login',\r\n            data: {\r\n                email,\r\n                password,\r\n            },\r\n        });\r\n\r\n        if (res.data.status === 'success') {\r\n            showAlert('success', 'Logged in successfully!');\r\n            window.setTimeout(() => {\r\n                window.location.href('/');\r\n            }, 1500);\r\n        }\r\n    } catch (err) {\r\n        showAlert('error', err.response.data.message);\r\n    }\r\n};\r\n\r\nexport const logout = async () => {\r\n    try {\r\n        const res = await axios({\r\n            method: 'GET',\r\n            url: 'http://127.0.0.1:3000/api/v1/users/logout',\r\n        });\r\n        if ((res.data.status = 'success')) location.reload(true);\r\n    } catch (err) {\r\n        console.log(err.response);\r\n        showAlert('error', 'Error logging out! Try again.');\r\n    }\r\n};\r\n","/* eslint-disable */\r\n\r\nexport const hideAlert = () => {\r\n    const el = document.querySelector('.alert');\r\n    if (el) el.parentElement.removeChild(el);\r\n  };\r\n  \r\n  // type is 'success' or 'error'\r\n  export const showAlert = (type, msg) => {\r\n    hideAlert();\r\n    const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\r\n    document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\r\n    window.setTimeout(hideAlert, 5000);\r\n  };","/* eslint-disable */\nimport axios from 'axios';\nimport { showAlert } from './alerts';\n\n// type is either 'password' or 'data'\nexport const updateSettings = async (data, type) => {\n    try {\n        const url =\n            type === 'password'\n                ? 'http://127.0.0.1:3000/api/v1/users/updateMyPassword'\n                : 'http://127.0.0.1:3000/api/v1/users/updateMe';\n\n        const res = await axios({\n            method: 'PATCH',\n            url,\n            data,\n        });\n\n        if (res.data.status === 'success') {\n            showAlert('success', `${type.toUpperCase()} updated successfully!`);\n        }\n    } catch (err) {\n        showAlert('error', err.response.data.message);\n    }\n};\n"],"names":[],"version":3,"file":"bundle.js.map"}